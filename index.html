<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ìƒë‚¨ìì˜ ì›¹í˜ì´ì§€</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      height: 100%;
      font-family: Arial, sans-serif;
      background-color: black;
      color: white;
      text-align: center;
      padding: 20px;
      scroll-behavior: smooth;
    }
    h1, h2 {
      margin-bottom: 20px;
    }
    button {
      margin: 20px auto;
      padding: 25px 50px;
      font-size: 1.8rem;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      background-color: darkred;
      color: white;
      text-align: center;
      display: block;
    }
    button:hover {
      background-color: crimson;
    }
    input {
      display: block;
      width: 80%;
      max-width: 400px;
      margin: 10px auto;
      padding: 15px;
      font-size: 1.2rem;
      border-radius: 5px;
      border: none;
    }
    form {
      margin: 20px auto;
      text-align: center;
      width: 100%;
    }
    textarea {
      display: block;
      width: 80%;
      max-width: 400px;
      margin: 10px auto;
      padding: 15px;
      font-size: 1.2rem;
      border-radius: 5px;
      border: none;
    }
    img {
      display: block;
      max-width: 100%;
      height: auto;
      margin: 20px auto;
    }
    #main-buttons {
      margin: 20px auto;
    }
    .hidden {
      display: none;
    }
    #board {
      margin-top: 20px;
      text-align: center;
      padding: 20px;
      background-color: darkred;
      border-radius: 10px;
      width: 80%;
      max-width: 600px;
      margin-left: auto;
      margin-right: auto;
    }
    #board h2 {
      font-size: 1.5rem;
      color: yellow;
      text-align: center;
    }
    .post {
      background-color: black;
      padding: 10px;
      margin: 10px 0;
      border-radius: 5px;
      color: white;
      text-align: center;
    }
    .post span {
      font-size: 0.8rem;
      color: gray;
      text-align: center;
    }
    #game-area {
      display: flex;
      justify-content: center;
      align-items: center;
      height: 400px;
      background-color: darkred;
      position: relative;
      color: yellow;
      font-size: 2rem;
      cursor: pointer;
    }
    #ranking-page ul {
      list-style: none;
      padding: 0;
    }
    #ranking-page li {
      margin: 10px 0;
      font-size: 1.5rem;
      color: gold;
    }
    #food-tournament {
      position: fixed; 
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background-color: rgba(0, 0, 0, 0.9);
      color: white;
      display: none; 
      flex-direction: column;
      justify-content: center;
      align-items: center;
      z-index: 1000; 
    }

    #food-tournament.visible {
      display: flex; 
    }

    #action-buttons button {
      padding: 10px 20px;
      font-size: 1.2rem;
      border: none;
      border-radius: 5px;
      background-color: darkred;
      color: white;
      cursor: pointer;
      transition: background-color 0.3s;
    }
    
    #action-buttons button:hover {
      background-color: crimson;
    }


  </style>
</head>
<body>
  <div id="main-buttons" class="main-buttons">
    <h1>ìƒë‚¨ìì˜ í˜ì´ì§€ì— ì–´ì„œì™€ë¼</h1>
    <button onclick="showForm('login')">ë¡œê·¸ì¸</button>
    <button onclick="showForm('signup')">íšŒì›ê°€ì…</button>
    <a href="https://www.youtube.com/watch?v=D3vO_ogtpUI&t=470s" target="_blank">
      <img src="image2.png" alt="ìƒë‚¨ìì˜ ì´ë¯¸ì§€" style="cursor: pointer;">
    </a>    
    <b style="font-size: 4rem; color: white;">ë‚¨ìëŠ” ë“±ìœ¼ë¡œ ë§í•œë‹¤</b>
  </div>

  <form id="login-form" class="hidden">
    <h2>ë¡œê·¸ì¸</h2>
    <input type="text" id="login-username" placeholder="ì•„ì´ë””" required>
    <input type="password" id="login-password" placeholder="ë¹„ë°€ë²ˆí˜¸" required>
    <button type="button" onclick="login()">ë¡œê·¸ì¸</button>
    <button type="button" onclick="goBack()">1ë³´ ì „ì§„ì„ ìœ„í•œ 2ë³´ í›„í‡´</button>
    <a href="https://www.youtube.com/watch?v=D3vO_ogtpUI&t=470s" target="_blank">
      <img src="image3.png" alt="ìƒë‚¨ìì˜ ì´ë¯¸ì§€">
    </a>
  </form>

  <form id="signup-form" class="hidden">
    <h2>íšŒì›ê°€ì…</h2>
    <input type="text" id="signup-username" placeholder="ì•„ì´ë””" required>
    <input type="password" id="signup-password" placeholder="ë¹„ë°€ë²ˆí˜¸" required>
    <button type="button" onclick="signup()">íšŒì›ê°€ì…</button>
    <button type="button" onclick="goBack()">1ë³´ ì „ì§„ì„ ìœ„í•œ 2ë³´ í›„í‡´</button>
    <a href="https://www.youtube.com/watch?v=D3vO_ogtpUI&t=470s" target="_blank">
      <img src="image3.png" alt="ìƒë‚¨ìì˜ ì´ë¯¸ì§€">
    </a>
  </form>

  <div id="welcome" class="hidden">
    <h2>ì–´ì„œì™€ë¼, ìƒë‚¨ìì˜ í™ˆí˜ì´ì§€ë‹¤!</h2>
    <div id="welcome-buttons" style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; max-width: 600px; margin: 0 auto;">
      <button onclick="goToBoard()">ê²Œì‹œíŒìœ¼ë¡œ</button>
      <button onclick="startGame()">ìƒë‚¨ìë ¥ í…ŒìŠ¤íŠ¸</button>
      <button onclick="showRanking()">ìƒë‚¨ì ë­í‚¹</button>
      <button onclick="startFoodTournament()">ìƒë‚¨ì ìŒì‹ ì›”ë“œì»µ</button>
      <button onclick="gayTest()">í•˜ë‚¨ì í…ŒìŠ¤íŠ¸</button>
      <button onclick="startRaisingManGame()">ìƒë‚¨ì í‚¤ìš°ê¸°</button>
    </div>
    <button onclick="logout()" style="margin-top: 20px; display: block; margin-left: auto; margin-right: auto;">ë¦¬ë²„ìŠ¤ ë¡œê·¸ì¸</button>
    <a href="https://www.youtube.com/watch?v=D3vO_ogtpUI&t=470s" target="_blank" style="display: block; margin-top: 20px;">
      <img src="image.png" alt="ìƒë‚¨ìì˜ ì´ë¯¸ì§€">
    </a>
  </div>
  
    
  <div id="board" class="hidden">
    <h2>ë‚¨ì•„ì¼ì–¸ì¤‘ì²œê¸ˆ</h2>
    <textarea id="post-content" rows="5" placeholder="ì—¬ê¸°ì— ê¸€ì„ ì‘ì„±í•˜ë¼" required></textarea>
    <button type="button" onclick="addPost()">ê¸€ ì˜¬ë¦¬ê¸°</button>
    <div id="posts"></div>
    <button onclick="goBack()">ì´ˆì‹¬ë¶ˆë§ ë§ˆë¶€ì‘ì¹¨</button>
  </div>

  <div id="food-tournament" class="hidden" style="text-align:center; padding:20px;"></div>

  <div id="raising-man-game" class="hidden">
    <h2>ìƒë‚¨ì í‚¤ìš°ê¸° ê²Œì„</h2>
    <p id="game-day">Day 1</p>
    <div id="health-container" style="display: flex; flex-wrap: wrap; max-width: 300px; margin: 0 auto;"></div>
    <img id="character-image" src="ë¼ì´ë„ˆ.png" alt="ìƒë‚¨ì ìºë¦­í„°" style="width: 200px; margin: 20px auto; display: block;">
    <p id="game-status">ìƒë‚¨ìê°€ ì²« ë‚ ì„ ì‹œì‘í•©ë‹ˆë‹¤!</p>
    <div id="action-buttons" style="display: flex; justify-content: center; gap: 20px; margin-top: 20px;">
      <button id="exercise-button" onclick="performAction('exercise')">ìš´ë™í•˜ê¸°</button>
      <button id="eat-button" onclick="performAction('eat')">ë°¥ë¨¹ê¸°</button>
      <button id="sleep-button" onclick="performAction('sleep')">ì ìê¸°</button>
    </div>
    <button onclick="exitRaisingManGame()" style="margin-top: 20px;">ê²Œì„ ì¢…ë£Œ</button>
  </div>

  
  <div id="game-over" class="hidden">
    <h2>ìƒë‚¨ìê°€ ì‚¬ë§í–ˆìŠµë‹ˆë‹¤!</h2>
    <img id="character-image" src="ì‚¬ë§.png" alt="ìƒë‚¨ì ìºë¦­í„°" style="width: 600px; height: auto; margin: 20px auto; display: block;">
    <p>ì²´ë ¥ì„ ëª¨ë‘ ìƒê±°ë‚˜ ì‚¬ê³ ë¡œ ì¸í•´ ì‚¬ë§í–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ë„ì „í•˜ì„¸ìš”!</p>
    <button onclick="restartGame()">ë‹¤ì‹œ ì‹œì‘</button>
  </div>

  <div id="game-over2" class="hidden">
    <h2>ìƒë‚¨ìê°€ ì‚¬ë§í–ˆìŠµë‹ˆë‹¤!</h2>
    <img id="character-image" src="ë•…ìš¸ë¦¼.png" alt="ìƒë‚¨ì ìºë¦­í„°" style="width: 700px; height: auto; margin: 20px auto; display: block;">
    <p>ë•…ìš¸ë¦¼ ë°œìƒ! ì´ˆëŒ€í˜• ê±°ì¸ì—ê²Œ ê¹”ë ¤ ì‚¬ë§!</p>
    <button onclick="restartGame()">ë‹¤ì‹œ ì‹œì‘</button>
  </div>
  

  <script>
    let boardTimer;

    function startBoardTimer() {
      clearTimeout(boardTimer);
      boardTimer = setTimeout(() => {
        alert('ì‹œê°„ ì´ˆê³¼ë‹¤. ìƒë‚¨ìëŠ” ì‹œê°„ì„ í—ˆíˆ¬ë£¨ ì“°ì§€ ì•ŠëŠ”ë‹¤.');
        window.close();
      }, 50000);
    }

    function goToBoard() {
      document.getElementById('welcome').classList.add('hidden');
      document.getElementById('board').classList.remove('hidden');
      startBoardTimer();
    }

    function addPost() {
      const content = document.getElementById('post-content').value.trim();
        
      if (!content) {
        alert('ë‚¨ìê°€ ì¹¼ì„ ë½‘ì•˜ìœ¼ë©´ ì©ì€ ë¬´ë¼ë„ ì°ì–´ì•¼ í•˜ëŠ” ë²•! ë¬´ì–¸ê°€ë¥¼ ì“°ê¸° ì „ê¹Œì§€ëŠ” ì´ê³³ì—ì„œ ê¸€ì„ ì˜¬ë¦´ ìˆ˜ ì—†ë‹¤!');
        return;
      }
    
      let formattedContent = `ì‚¬ë‚˜ì´ ${content} ìƒë‚¨ì`;
    
      const words = formattedContent.split(' ');
      const numberOfInsertions = Math.min(3, words.length - 1); 
    
      for (let i = 0; i < numberOfInsertions; i++) {
        const randomIndex = Math.floor(Math.random() * (words.length - 1)) + 1; 
        words.splice(randomIndex, 0, 'ğŸ’ªğŸ»ìƒë‚¨ìğŸ’ªğŸ»');
      }
    
      formattedContent = words.join(' '); 
    
      const post = document.createElement('div');
      post.classList.add('post');
      const timestamp = new Date().toLocaleString();
      post.innerHTML = `<p>${formattedContent}</p><span>${timestamp}</span>`;
      document.getElementById('posts').appendChild(post);
      document.getElementById('post-content').value = ''; 
    }

    function logout() {
      sessionStorage.removeItem('loggedInUser');
      document.getElementById('welcome').classList.add('hidden');
      document.getElementById('board').classList.add('hidden');
      document.getElementById('main-buttons').classList.remove('hidden');
      clearTimeout(boardTimer);
    }

    function showForm(type) {
      document.getElementById('main-buttons').classList.add('hidden');
      if (type === 'login') {
        document.getElementById('login-form').classList.remove('hidden');
      } else if (type === 'signup') {
        document.getElementById('signup-form').classList.remove('hidden');
      }
    }

    function goBack() {
      document.querySelectorAll('form').forEach(form => form.classList.add('hidden'));
      document.getElementById('welcome').classList.add('hidden');
      document.getElementById('board').classList.add('hidden');
      document.getElementById('main-buttons').classList.remove('hidden');
    }


    function signup() {
      const username = document.getElementById('signup-username').value;
      const password = document.getElementById('signup-password').value;

      if (localStorage.getItem(username)) {
        alert('ì´ ì•„ì´ë””ëŠ” ì´ë¯¸ ì“°ê³  ìˆëŠ” ë†ˆì´ ìˆë‹¤!');
      } else {
        localStorage.setItem(username, password);
        alert('íšŒì›ê°€ì… ì™„ë£Œë‹¤!');
        goBack();
      }
    }

    function login() {
      const username = document.getElementById('login-username').value;
      const password = document.getElementById('login-password').value;
        
      const storedPassword = localStorage.getItem(username);
        
      if (storedPassword === password) {
        sessionStorage.setItem('loggedInUser', username);
        document.getElementById('login-form').classList.add('hidden');
        document.getElementById('welcome').classList.remove('hidden');
        updateWelcomeButtons();
      } else {
        alert('ì•„ì´ë””ë‚˜ ë¹„ë°€ë²ˆí˜¸ê°€ í‹€ë ¸ë‹¤. ë‹¤ì‹œ í•´ë¼.');
      }
    }

    function updateWelcomeButtons() {
      const currentUser = sessionStorage.getItem('loggedInUser');
      const welcomeButtons = document.getElementById('welcome-buttons');

      if (!welcomeButtons) {
        console.error("Element 'welcome-buttons'ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
        return;
      }
    
      const button2 = welcomeButtons.querySelector('button:nth-child(2)');
      const button3 = welcomeButtons.querySelector('button:nth-child(3)');
    
      if (currentUser) {
        if (button2) button2.style.display = 'inline-block';
        if (button3) button3.style.display = 'inline-block';
      } else {
        if (button2) button2.style.display = 'none';
        if (button3) button3.style.display = 'none';
      }
    }


    window.onload = function () {
      const loggedInUser = sessionStorage.getItem('loggedInUser');
      if (loggedInUser) {
        document.getElementById('main-buttons').classList.add('hidden');
        document.getElementById('welcome').classList.remove('hidden');
        updateWelcomeButtons(); 
      }
    };


    let score = 0;
    let gameTimer;
    
    function startGame() {
      const currentUser = sessionStorage.getItem('loggedInUser');
      if (!currentUser) {
        alert('ë¡œê·¸ì¸ í›„ ì´ìš©í•´ë¼!');
        return;
      }
    
      resetGameState();

      const gameArea = createGameArea();
      const countdown = createCountdown(gameArea);
    
      spawnPunch();
      startCountdown(countdown, currentUser);
    }

    function resetGameState() {
      score = 0;
      const existingGameArea = document.getElementById('game-area');
      if (existingGameArea) existingGameArea.remove();
      document.getElementById('welcome').classList.add('hidden');
    }

    function createGameArea() {
      const gameArea = document.createElement('div');
      gameArea.id = 'game-area';
      gameArea.style = 'position:relative; height:400px; background-color:black;';
      document.body.appendChild(gameArea);
      return gameArea;
    }

    function createCountdown(gameArea) {
      const countdown = document.createElement('h2');
      countdown.id = 'countdown';
      countdown.textContent = '10ì´ˆ ì¤€ë¹„í•´ë¼!';
      countdown.style = 'color: white; text-align: center;';
      gameArea.appendChild(countdown);
      return countdown;
    }

    function startCountdown(countdown, currentUser) {
      countdown.style.position = 'absolute';
      countdown.style.top = '10px';
      countdown.style.left = '50%';
      countdown.style.transform = 'translateX(-50%)';

      gameTimer = setInterval(() => {
        const timeLeft = parseInt(countdown.textContent) - 1;
        if (timeLeft > 0) {
          countdown.textContent = `${timeLeft}ì´ˆ ë‚¨ì•˜ë‹¤!`;
        } else {
          clearInterval(gameTimer);
          endGame(currentUser);
        }
      }, 1000);
    }


    function spawnPunch() {
      const punch = document.createElement('img');
      punch.src = 'punch.png';
      punch.alt = 'ì£¼ë¨¹';
      punch.style.position = 'absolute';
      punch.style.width = '100px';
      punch.style.height = '90px';
      punch.style.cursor = 'pointer';

      const gameArea = document.getElementById('game-area');
      const gameAreaRect = gameArea.getBoundingClientRect();

      const maxX = gameAreaRect.width - 50;
      const maxY = gameAreaRect.height - 50;

      punch.style.left = `${Math.random() * maxX}px`;
      punch.style.top = `${Math.random() * maxY}px`;

      punch.onclick = () => {
        score++;
        punch.remove();
        spawnPunch();
      };
    
      gameArea.appendChild(punch);
    }


    function endGame(currentUser) {
      clearInterval(gameTimer);
      document.getElementById('game-area').remove();
      alert(`ê²°ê³¼: ${score}ì !`);
      saveScore(currentUser, score);
      document.getElementById('welcome').classList.remove('hidden');
    }

    function saveScore(username, score) {
      let rankings = JSON.parse(localStorage.getItem('rankings')) || [];
      rankings.push({ username, score, timestamp: Date.now() });
      rankings.sort((a, b) => b.score - a.score || a.timestamp - b.timestamp);
      rankings = rankings.slice(0, 10);
      localStorage.setItem('rankings', JSON.stringify(rankings));
    }

    function showRanking() {
      document.getElementById('welcome').classList.add('hidden');
      const rankingPage = document.createElement('div');
      rankingPage.id = 'ranking-page';
      rankingPage.style = 'text-align:center; color:white; background-color:darkred; padding:20px;';
      document.body.appendChild(rankingPage);
    
      const rankings = JSON.parse(localStorage.getItem('rankings')) || [];
      const rankingList = document.createElement('ul');
      rankingList.style = 'list-style:none; padding:0;';
    
      rankings.forEach((entry, index) => {
        const listItem = document.createElement('li');
        listItem.style = 'margin:10px; font-size:1.2rem; color:yellow;';
        listItem.textContent = `ğŸ’ªğŸ»${index + 1}ë“± ì‚¬ë‚˜ì´ğŸ’ªğŸ» [${entry.username}: ${entry.score}ì ]`;
        rankingList.appendChild(listItem);
      });
    
      const backButton = document.createElement('button');
      backButton.textContent = '1ë³´ ì „ì§„ì„ ìœ„í•œ 2ë³´ í›„í‡´';
      backButton.style = 'margin-top:20px;';
      backButton.onclick = () => {
        rankingPage.remove();
        document.getElementById('welcome').classList.remove('hidden');
      };
    
      rankingPage.appendChild(rankingList);
      rankingPage.appendChild(backButton);
    }


    function startFoodTournament() {
      const foodImages = [
        'food/CPU.png',
        'food/ê°•ì² .png',
        'food/ê³ ì¶”.png',
        'food/ê¹€ì¹˜.png',
        'food/ë‚˜ë¬´ê»ì§ˆ.png',
        'food/ë‹­ê°€ìŠ´ì‚´.png',
        'food/ëˆê¹ŒìŠ¤.png',
        'food/ëŒë§¹ì´.png',
        'food/ë¼ì§€êµ­ë°¥.png',
        'food/ë§¥ì£¼.png',
        'food/ë©”ëª¨ë¦¬.png',
        'food/ë°¥.png',
        'food/ë²ˆê°œ.png',
        'food/ë³µë¶„ì.png',
        'food/ë¶€ëŒ€ì°Œê°œ.png',
        'food/ë¶ˆ.png',
        'food/ì‹ ë¼ë©´.png',
        'food/ì‚¼ê²¹ì‚´.png',
        'food/ì‚¼ê³„íƒ•.png',
        'food/ìƒê³ ê¸°.png',
        'food/ì†Œì‹œì§€.png',
        'food/ìˆœëŒ€êµ­.png',
        'food/ìˆ¯.png',
        'food/ì•„ì´ìŠ¤ì•„ë©”ë¦¬ì¹´ë…¸.png',
        'food/ì¡ì´ˆ.png',
        'food/ì¥ì–´.png',
        'food/ì œìœ¡.png',
        'food/ì¡±ë°œ.png',
        'food/ì¹˜í‚¨.png',
        'food/íƒœì–‘.png',
        'food/í•µ.png',
        'food/í•µë¶ˆë‹­ë³¶ìŒë©´.png',
      ];

      const shuffledFoods = foodImages.sort(() => Math.random() - 0.5); 
      let currentPairs = shuffledFoods.slice();
      let nextRound = [];
      let roundCount = Math.log2(foodImages.length);

      const roundNames = {
        5: '32ê°•',
        4: '16ê°•',
        3: '8ê°•',
        2: '4ê°•',
        1: 'ê²°ìŠ¹',
      };
    
      const getFoodName = (filePath) => filePath.split('/').pop().replace('.png', '');
    
      function showFoodPair() {
        const tournamentArea = document.getElementById('food-tournament');
        tournamentArea.classList.add('visible');
        tournamentArea.style.display = 'flex';

        if (currentPairs.length === 0 && nextRound.length === 1) {
          const winnerName = getFoodName(nextRound[0]);
          tournamentArea.innerHTML = `
            <div style="text-align: center;">
              <h2 style="font-size: 2rem;">ìµœê³ ì˜ ìƒë‚¨ì ìŒì‹:</h2>
              <img src="${nextRound[0]}" alt="Champion" style="width:300px; height:300px; margin:20px;">
              <p style="color:yellow; font-size:2rem; font-weight:bold;">${winnerName}</p>
              <button onclick="closeFoodTournament()" style="margin-top:20px; padding:10px 20px; font-size:1.2rem; background-color:darkred; color:white; border:none; border-radius:5px; cursor:pointer;">ë‹«ê¸°</button>
            </div>
          `;
          return;
        }
      
        if (currentPairs.length === 0 && nextRound.length > 1) {
          currentPairs = nextRound;
          nextRound = [];
          roundCount--;
        }
      
        const [food1, food2] = currentPairs.splice(0, 2);
        const food1Name = getFoodName(food1);
        const food2Name = getFoodName(food2);
      
        tournamentArea.innerHTML = `
          <h2 style="font-size: 1.5rem; margin-bottom: 20px;">${roundNames[roundCount]} ëŒ€ê²°!</h2>
          <div style="display:flex; justify-content:center; gap:20px;">
            <div style="text-align:center;">
              <img src="${food1}" alt="${food1Name}" style="width:300px; height:300px; margin:10px; cursor:pointer;" onclick="chooseFood('${food1}')">
              <p style="color:white; font-size:1.2rem;">${food1Name}</p>
            </div>
            <div style="text-align:center;">
              <img src="${food2}" alt="${food2Name}" style="width:300px; height:300px; margin:10px; cursor:pointer;" onclick="chooseFood('${food2}')">
              <p style="color:white; font-size:1.2rem;">${food2Name}</p>
            </div>
          </div>
        `;
      }

      window.closeFoodTournament = function () {
        const tournamentArea = document.getElementById('food-tournament');

        tournamentArea.style.display = 'none';
        tournamentArea.classList.remove('visible');
        tournamentArea.innerHTML = ''; 

        const welcomeScreen = document.getElementById('welcome');
        if (welcomeScreen && welcomeScreen.classList.contains('hidden')) {
          welcomeScreen.classList.remove('hidden'); 
        }
      };


      window.chooseFood = function (selectedFood) {
        nextRound.push(selectedFood);
        showFoodPair();
      };
    
      document.getElementById('welcome').classList.add('hidden');
      document.getElementById('food-tournament').classList.remove('hidden');
      showFoodPair();
    }

    let gayTestIndex = 0; 
    const gayTestQuestions = [
      "5ì¸µ ì´í•˜ëŠ” ì°½ë¬¸ì—ì„œ ë›°ì–´ë‚´ë¦°ë‹¤",
      "í•„ê¸°í•  ë•Œì—ëŠ” ëŒíŒì— ë„ë¼ë¡œ ìƒˆê¸´ë‹¤",
      "ì½”ë”©í•  ë•Œ ë©”ëª¨ë¦¬ ë”°ìœ„ëŠ” ì‹ ê²½ì“°ì§€ ì•ŠëŠ”ë‹¤",
      "ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤",
      "êµ­ë°¥ì„ ë¨¹ì„ ë•Œ ëœì–´ë¨¹ì§€ ì•ŠëŠ”ë‹¤",
      "ì½”ë”©ì€ í•œ ì†ìœ¼ë¡œ í•œë‹¤",
      "3ëŒ€ 500",
      "íœ´ëŒ€í°ì€ ê°¤ëŸ­ì‹œë‹¤",
      "ì»¤í”¼ëŠ” ë¬´ì¡°ê±´ ì•„ì´ìŠ¤ë‹¤",
      "ë‚¨ë“¤ì˜ ì‹œì„  ë”°ìœ„ ì‹ ê²½ì“°ì§€ ì•ŠëŠ”ë‹¤",
      "ë¸Œë¼ìš°ì € í˜¸í™˜ì„± ë”°ìœ„ ì‹ ê²½ ì“°ì§€ ì•ŠëŠ”ë‹¤. ëª¨ë“  ì‚¬ëŒì´ ìµœì‹  ë¸Œë¼ìš°ì €ë¥¼ ì“´ë‹¤",
      "ë””ë²„ê¹…ì„ í•˜ì§€ ì•ŠëŠ”ë‹¤. ì½”ë“œëŠ” ì²˜ìŒë¶€í„° ì™„ë²½í•˜ê²Œ í•œë‹¤",
      "ìƒë‚¨ìëŠ” íŒŒì¼ í•˜ë‚˜ì— ëª¨ë“  ì½”ë“œë¥¼ ì§ ë‹¤",
      "í”„ë ˆì„ì›Œí¬, ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” ì‚¬ì¹˜ë‹¤",
      "í•œë²ˆ ê²°ì •í•œ ì„ íƒì€ ë²ˆë³µí•˜ì§€ ì•ŠëŠ”ë‹¤",
      "ëª…ì˜ˆì™€ ì‹ ì˜ë¥¼ ì§€í‚¨ë‹¤"
    ];
    
    function gayTest() {
      gayTestIndex = 0; 
      document.getElementById("welcome").classList.add("hidden");
      showGayTestQuestion(); 
    }
  
    function showGayTestQuestion() {
      const testArea = document.getElementById("food-tournament");
      testArea.classList.add("visible");
      testArea.style.display = "flex";
      testArea.style.flexDirection = "column";
      testArea.style.alignItems = "center";
      testArea.innerHTML = `
        <div style="text-align: center; width: 100%; max-width: 500px;">
          <h2 style="min-height: 80px; display: flex; align-items: center; justify-content: center;">${gayTestQuestions[gayTestIndex]}</h2>
          <div style="display: flex; justify-content: space-between; margin-top: 20px; width: 100%; max-width: 400px;">
            <button style="flex: 1; margin: 0 10px; padding: 15px 30px; font-size: 1.2rem; background-color: darkred; color: white; border: none; border-radius: 5px; cursor: pointer;" onclick="handleGayTestAnswer('yes')">ì˜ˆ</button>
            <button style="flex: 1; margin: 0 10px; padding: 15px 30px; font-size: 1.2rem; background-color: crimson; color: white; border: none; border-radius: 5px; cursor: pointer;" onclick="handleGayTestAnswer('no')">ì•„ë‹ˆì˜¤</button>
          </div>
        </div>
      `;
    }
  
    function handleGayTestAnswer(answer) {
      if (answer === "no") {
        endGayTest("í•˜ë‚¨ì");
      } else {
        gayTestIndex++;
        if (gayTestIndex < gayTestQuestions.length) {
          showGayTestQuestion(); 
        } else {
          endGayTest("ìƒë‚¨ì"); 
        }
      }
    }
  
    function endGayTest(result) {
      const testArea = document.getElementById("food-tournament");
      testArea.innerHTML = `
        <div style="text-align: center;">
          <h2 style="font-size: 2rem; color: yellow;">í…ŒìŠ¤íŠ¸ ê²°ê³¼:</h2>
          <p style="font-size: 1.5rem; color: ${result === "ìƒë‚¨ì" ? "green" : "red"};">${result}</p>
          <button style="margin-top: 20px; padding: 10px 20px; font-size: 1.2rem; background-color: darkred; color: white; border: none; border-radius: 5px; cursor: pointer;" onclick="closeGayTest()">ë‹«ê¸°</button>
        </div>
      `;
    }
  
    function closeGayTest() {
      const testArea = document.getElementById("food-tournament");
      testArea.style.display = "none";
      testArea.classList.remove("visible");
      document.getElementById("welcome").classList.remove("hidden"); 
    }


    let currentDay = 1;
    let isAlive = true;
    let health = 10; 
    const maxHeartsPerRow = 10; 
    let deathReason = "";

    function startRaisingManGame() {
      currentDay = 1;
      isAlive = true;
      health = 10; 
      document.getElementById("welcome").classList.add("hidden");
      document.getElementById("raising-man-game").classList.remove("hidden");
      document.getElementById("game-day").textContent = "Day 1";
      document.getElementById("game-status").textContent = "ìƒë‚¨ìê°€ ì²« ë‚ ì„ ì‹œì‘í•©ë‹ˆë‹¤!";
      updateHealthDisplay(); 
    }

    function updateHealthDisplay() {
      const healthContainer = document.getElementById("health-container");
      healthContainer.innerHTML = ""; 

      healthContainer.style.display = "flex";
      healthContainer.style.justifyContent = "center";
      healthContainer.style.flexWrap = "nowrap"; 

      for (let i = 0; i < health; i++) {
        const heart = document.createElement("img");
        heart.src = "heart.png"; 
        heart.alt = "ì²´ë ¥";
        heart.style.width = "30px";
        heart.style.margin = "5px";
        healthContainer.appendChild(heart);
      }
    }

    function performAction(action) {
      if (!isAlive) return;

      const outcomes = {
        exercise: [
          { chance: 50, result: "ìš´ë™ ì„±ê³µ! ì²´ë ¥ì´ ì¦ê°€í•©ë‹ˆë‹¤.", effect: +1 },
          { chance: 10, result: "ë•…ìš¸ë¦¼ë°œìƒ, ì´ˆëŒ€í˜•ê±°ì¸ì—ê²Œ ê¹”ë ¤ ì‚¬ë§", effect: -health, reason: "ë•…ìš¸ë¦¼ë°œìƒ, ì´ˆëŒ€í˜•ê±°ì¸ì—ê²Œ ê¹”ë ¤ ì‚¬ë§" },
          { chance: 10, result: "ë²¤ì¹˜í”„ë ˆìŠ¤ ì‹¤íŒ¨ë¡œ ê¹”ë ¤ ì‚¬ë§!", effect: -health, reason: "ë²¤ì¹˜í”„ë ˆìŠ¤í•˜ë‹¤ ê¹”ë ¤ ì‚¬ë§" },
          { chance: 10, result: "ìš´ë™ ì¤‘ ê·¼ìœ¡ ë¶€ìƒ! ì²´ë ¥ì´ 3 ê°ì†Œí•©ë‹ˆë‹¤.", effect: -3 },
          { chance: 10, result: "ë„˜ì–´ì§€ë©° ë°œëª© ë¶€ìƒ! ì²´ë ¥ì´ 1 ê°ì†Œí•©ë‹ˆë‹¤.", effect: -1 },
          { chance: 10, result: "ìš´ë™ ì¤‘ ì–´ê¹¨ ë¶€ìƒ! ì²´ë ¥ì´ 2 ê°ì†Œí•©ë‹ˆë‹¤.", effect: -2 }
        ],
        eat: [
          { chance: 50, result: "ë°¥ì„ ë§›ìˆê²Œ ë¨¹ì—ˆìŠµë‹ˆë‹¤! ì²´ë ¥ì´ íšŒë³µë©ë‹ˆë‹¤.", effect: +1 },
          { chance: 10, result: "ë•…ìš¸ë¦¼ë°œìƒ, ì´ˆëŒ€í˜•ê±°ì¸ì—ê²Œ ê¹”ë ¤ ì‚¬ë§", effect: -health, reason: "ë•…ìš¸ë¦¼ë°œìƒ, ì´ˆëŒ€í˜•ê±°ì¸ì—ê²Œ ê¹”ë ¤ ì‚¬ë§!" },
          { chance: 10, result: "ë‘˜ì´ ë¨¹ë‹¤ í•˜ë‚˜ ì£½ì–´ë„ ëª¨ë¥¼ ìŒì‹ì„ ë¨¹ê³  ì‚¬ë§!", effect: -health, reason: "ë‘˜ì´ ë¨¹ë‹¤ í•˜ë‚˜ ì£½ì–´ë„ ëª¨ë¥¼ ìŒì‹ì„ ë¨¹ê³  ì‚¬ë§!" },
          { chance: 10, result: "ëœ¨ê±°ìš´ êµ­ë¬¼ì„ ë§ˆì…” ì²´ë ¥ì´ 1 ê°ì†Œí•©ë‹ˆë‹¤.", effect: -1 },
          { chance: 10, result: "ì˜ëª»ëœ ìŒì‹ì„ ë¨¹ì–´ ì²´ë ¥ì´ 2 ê°ì†Œí•©ë‹ˆë‹¤.", effect: -2 },
          { chance: 10, result: "ì‹ì¤‘ë…ìœ¼ë¡œ ì²´ë ¥ì´ 3 ê°ì†Œí•©ë‹ˆë‹¤.", effect: -3 }
        ],
        sleep: [
          { chance: 50, result: "ì ì„ í‘¹ ì¤ìŠµë‹ˆë‹¤! ì²´ë ¥ì´ ì™„ì „íˆ íšŒë³µë©ë‹ˆë‹¤.", effect: +1 },
          { chance: 10, result: "ì ê²°ì— ì¹¨ëŒ€ì—ì„œ ë–¨ì–´ì ¸ ì‚¬ë§!", effect: -health, reason: "ì ê²°ì— ì¹¨ëŒ€ì—ì„œ ë–¨ì–´ì ¸ ì‚¬ë§!" },
          { chance: 10, result: "ë•…ìš¸ë¦¼ë°œìƒ, ì´ˆëŒ€í˜•ê±°ì¸ì—ê²Œ ê¹”ë ¤ ì‚¬ë§", effect: -health, reason: "ë•…ìš¸ë¦¼ë°œìƒ, ì´ˆëŒ€í˜•ê±°ì¸ì—ê²Œ ê¹”ë ¤ ì‚¬ë§!" },
          { chance: 10, result: "ì ê²°ì— ê·¼ìœ¡ ê²½ë ¨ì´ ìƒê²¨ ì²´ë ¥ì´ 2 ê°ì†Œí•©ë‹ˆë‹¤.", effect: -2 },
          { chance: 10, result: "ë² ê°œê°€ ë„ˆë¬´ ë†’ì•„ ëª© ë¶€ìƒ! ì²´ë ¥ì´ 1 ê°ì†Œí•©ë‹ˆë‹¤.", effect: -1 },
          { chance: 10, result: "ì´ë¶ˆ ì†ì—ì„œ ëª¸ì‚´ ê°ê¸°! ì²´ë ¥ì´ 3 ê°ì†Œí•©ë‹ˆë‹¤.", effect: -3 }
        ]
      };
    
      const outcome = getOutcome(outcomes[action]);
      health += outcome.effect;
    
      if (outcome.reason) {
        deathReason = outcome.reason; 
      }
    
      if (outcome.result.includes("ì‚¬ë§") || health <= 0) {
        isAlive = false;
        health = 0;
        updateHealthDisplay();
        showGameOver();
        return;
      }
    
      document.getElementById("game-status").textContent = `${outcome.result}`;
      updateHealthDisplay();
    
      currentDay++;
      if (currentDay > 10) {
        showGameSuccess();
        return;
      }
    
      document.getElementById("game-day").textContent = `Day ${currentDay}`;
    }


    function showGameSuccess() {
      document.getElementById("raising-man-game").classList.add("hidden");

      const successContainer = document.createElement("div");
      successContainer.id = "success-message";
      successContainer.style.textAlign = "center";
      successContainer.style.marginTop = "50px";

      successContainer.innerHTML = `
        <h2>ì¶•í•˜í•©ë‹ˆë‹¤! ìƒë‚¨ìê°€ 10ì¼ê°„ ì‚´ì•„ë‚¨ì•˜ìŠµë‹ˆë‹¤!</h2>
        <img id="character-image" src="ê±°ì¸.png" alt="ìƒë‚¨ì ìºë¦­í„°" style="width: 500px; height: auto; margin: 20px auto; display: block;">
        <p>ì§„ì •í•œ ìƒë‚¨ìë¡œ ì„±ì¥í•œ ìºë¦­í„°ë¥¼ ê¸°ë…í•©ë‹ˆë‹¤!</p>
        <button onclick="exitRaisingManGame()" style="padding: 10px 20px; font-size: 1.2rem; background-color: darkred; color: white; border: none; border-radius: 5px; cursor: pointer;">ë©”ì¸ í™”ë©´ìœ¼ë¡œ</button>
      `;

      document.body.appendChild(successContainer);
    }

    function getOutcome(possibleOutcomes) {
      const random = Math.random() * 100;
      let cumulativeChance = 0;
    
      for (let outcome of possibleOutcomes) {
        cumulativeChance += outcome.chance;
        if (random < cumulativeChance) {
          return outcome;
        }
      }
    }


    function showGameOver() {
      document.getElementById("raising-man-game").classList.add("hidden");
      document.getElementById("game-over").classList.add("hidden");
      document.getElementById("welcome").classList.add("hidden");
      document.getElementById("board").classList.add("hidden");
      document.getElementById("game-over2").classList.add("hidden");

      if (deathReason.includes("ë•…ìš¸ë¦¼ë°œìƒ")) {
        document.getElementById("game-over2").classList.remove("hidden");
      } else {
        const gameOverSection = document.getElementById("game-over");
        gameOverSection.classList.remove("hidden");
      
        const deathMessage = deathReason ? `ì‚¬ë§ ì›ì¸: ${deathReason}` : "ì•Œ ìˆ˜ ì—†ëŠ” ì´ìœ ë¡œ ì‚¬ë§!";
        const existingMessage = gameOverSection.querySelector(".death-reason");
      
        if (existingMessage) {
          existingMessage.textContent = deathMessage;
        } else {
          const additionalMessage = document.createElement("p");
          additionalMessage.textContent = deathMessage;
          additionalMessage.className = "death-reason";
          additionalMessage.style.color = "yellow";
          additionalMessage.style.fontSize = "1.5rem";
          additionalMessage.style.marginTop = "10px";
          gameOverSection.appendChild(additionalMessage);
        }
      }

  const healthContainer = document.getElementById("health-container");
  if (healthContainer) {
    healthContainer.innerHTML = "";
  }
}



    function restartGame() {
      document.getElementById("game-over").classList.add("hidden");
      document.getElementById("game-over2").classList.add("hidden");
      startRaisingManGame();
    }

    function exitRaisingManGame() {
      document.getElementById("raising-man-game").classList.add("hidden");

      const successMessage = document.getElementById("success-message");
      if (successMessage) {
        successMessage.remove();
      }
      document.getElementById("welcome").classList.remove("hidden");
    }

  </script>
</body>
</html>